<% @title = resource.human %>
<h1><%= @title %></h1>
<%= will_paginate @records, :url => resource.index_path(:page => '') %>
<div class="columns">
  <div class="row">
    <div class="column left_column">
    <% if @records.empty? %>
      <p>Sorry, but there is no records in <%= resource.human %></p>
    <% else %>
      <table class="list_table">
        <thead>
          <tr>
          <% index_fields.each do |field| -%>
            <th><%= render_head field %></th>
          <% end -%>
            <th class="actions">Actions</th>
          </tr>
        </thead>
        <tbody>
        <% @records.each do |record| -%>
          <tr>
          <% index_fields.each do |field| -%>
            <td><%= render_field record, field %></td>
          <% end -%>
            <td class="actions">
              <%= link_to 'show', resource.path(record), :class => 'show_entry' if controller.show_fields || resource_children.present? %>
              <%= link_to 'edit', resource.edit_path(record), :class => 'edit_entry' if controller.update_fields || controller.form_fields %>
              <%= link_to 'destroy', resource.path(record), :confirm => "Are you sure?", :method => :delete, :class => 'remove_entry' if configuration.destroy %>
              <% resource.children(:post_id => record.id).each do |child| %>
                <% if child.plural? %>
                  <p><%= link_to "#{child.human}(#{child.collection.size})", child.index_path %></p>
                <% else %>
                  <p><%= link_to "#{child.member ? 'Edit' : 'Add'} #{child.human}", child.index_path %></p>
                <% end %>
              <% end %>
            </td>
          </tr>
        <% end -%>
        </tbody>
      </table>
    <% end %>
    </div>
  </div>
</div>
<%= will_paginate @records, :url => resource.index_path(:page => '') %>

<% content_for :additional_navigation do %>
  <ul class="buttons">
    <% resource.ancestors.each do |resource| %>
      <%= link_to resource.plural? ? resource.human : resource.member.to_title, resource.index_path %>
      <%= link_to resource.member.to_title, resource.path unless resource.plural? %>
    <% end %>
    <%= link_to resource.plural? ? resource.human : resource.member.to_title, resource.index_path %>
  </ul>
<% end %>

