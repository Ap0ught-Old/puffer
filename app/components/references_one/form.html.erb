<%= component_fields_for @record do |f| %>
  <div class="label">
    <%= f.label field %>
    <div class="field_error">
      <%= @record.errors[field.reflection.accessor.to_sym].first ||
        @record.errors[field.name.to_sym].first.presence %>
    </div>
  </div>
  <%= f.text_field field, field.input_options %>
<% end %>
